<div class="ui-g">
    <div class="ui-g-12 ui-lg-6">
        <div class="card">
            <h1>My Form Instances</h1>
            <div *ngFor="let formInstance of formInstances">
                <div class="card">
                    <h2>{{formInstance.formTemplateMapping.formTemplateName}}</h2>

                    <button pButton icon="ui-icon-add" label="View details" (click)="select(formInstance)"></button>
                </div>
            </div>

            <button pButton icon="ui-icon-add" label="Add new Form Instance" routerLink="/form-repo-screen"></button>

        </div>
        <p-toast key="tst" position="bottom-center"></p-toast>
    </div>
    <div class="ui-g-12 ui-lg-6" *ngIf="selected">
        <form #viewFormInstanceDetailsForm="ngForm" (ngSubmit)="submit(viewFormInstanceDetailsForm)">
            <div class="card">
                <p-messages [closable]="false" [value]="msgForDialog"></p-messages>
                <div id="content">
                    <h1>{{selectedFormInstance.formTemplateMapping.formTemplateName}}</h1>

                    <div *ngFor="let formInstanceField of this.selectedFormInstance.formInstanceFields">
                        <!-- Works -->
                        <div *ngIf="formInstanceField.formFieldMapping.inputType === 'HEADER'">
                            <h2>{{formInstanceField.formFieldMapping.position}}
                                {{formInstanceField.formFieldMapping.question}}</h2>
                        </div>

                        <div *ngIf="formInstanceField.formFieldMapping.inputType === 'TEXT'">
                            <h4>{{formInstanceField.formFieldMapping.position}}
                                {{formInstanceField.formFieldMapping.question}}</h4>
                            <input type="text" pInputText name="textInput"
                                [disabled]="!formInstanceField.formFieldMapping.isServicemanEditable"
                                [(ngModel)]="selectedFieldValues[formInstanceField.formInstanceFieldId]" />
                        </div>

                        <div *ngIf="formInstanceField.formFieldMapping.inputType === 'NUMBER'">
                            <h4>{{formInstanceField.formFieldMapping.position}}
                                {{formInstanceField.formFieldMapping.question}}</h4>
                            <input type="number" pInputText name="numberInput"
                                [disabled]="!formInstanceField.formFieldMapping.isServicemanEditable"
                                [(ngModel)]="selectedFieldValues[formInstanceField.formInstanceFieldId]" />

                        </div>

                        <div *ngIf="formInstanceField.formFieldMapping.inputType === 'CHECK_BOX'">
                            <h4>{{formInstanceField.formFieldMapping.position}}
                                {{formInstanceField.formFieldMapping.question}}</h4>
                            <div class="ui-g">
                                <div class="ui-g-12 ui-md-4"
                                    *ngFor="let formFieldOption of formInstanceField.formFieldMapping.formFieldOptions">
                                    <p-checkbox name="checkboxInput" value="{{formFieldOption.formFieldOptionValue}}"
                                        [(ngModel)]="selectedFieldValues[formInstanceField.formInstanceFieldId]"
                                        label="{{formFieldOption.formFieldOptionValue}}"></p-checkbox>
                                </div>
                            </div>
                        </div>

                        <div *ngIf="formInstanceField.formFieldMapping.inputType === 'MULTI_DROPDOWN'">
                            <h4>{{formInstanceField.formFieldMapping.position}}
                                {{formInstanceField.formFieldMapping.question}}</h4>
                            <p-multiSelect name="multiSelectInput"
                                [options]="formInstanceField.formFieldMapping.formFieldOptions"
                                dataKey="formFieldOptionValue"
                                [(ngModel)]="selectedFieldValues[formInstanceField.formInstanceFieldId]"
                                optionLabel="formFieldOptionValue"></p-multiSelect>

                        </div>
                        <div *ngIf="formInstanceField.formFieldMapping.inputType === 'SINGLE_DROPDOWN'">
                            <h4>{{formInstanceField.formFieldMapping.position}}
                                {{formInstanceField.formFieldMapping.question}}</h4>
                            <p-dropdown name="singleSelectInput"
                                [options]="formInstanceField.formFieldMapping.formFieldOptions"
                                dataKey="formFieldOptionValue"
                                [(ngModel)]="selectedFieldValues[formInstanceField.formInstanceFieldId]"
                                optionLabel="formFieldOptionValue"></p-dropdown>


                        </div>
                        <div *ngIf="formInstanceField.formFieldMapping.inputType === 'RADIO_BUTTON'">
                            <h4>{{formInstanceField.formFieldMapping.position}}
                                {{formInstanceField.formFieldMapping.question}}</h4>
                            <div class="ui-g">
                                <div class="ui-g-12 ui-md-4"
                                    *ngFor="let formFieldOption of formInstanceField.formFieldMapping.formFieldOptions">
                                    <p-radioButton name="radioInput" value="{{formFieldOption.formFieldOptionValue}}"
                                        [(ngModel)]="selectedFieldValues[formInstanceField.formInstanceFieldId]"
                                        label="{{formFieldOption.formFieldOptionValue}}"></p-radioButton>
                                </div>
                            </div>
                        </div>
                        <div *ngIf="formInstanceField.formFieldMapping.inputType === 'DATE'">
                            <h4>{{formInstanceField.formFieldMapping.position}}
                                {{formInstanceField.formFieldMapping.question}}</h4>
                            <p-calendar name="dateInput"
                                [(ngModel)]="selectedFieldValues[formInstanceField.formInstanceFieldId]"></p-calendar>
                        </div>
                        <div *ngIf="formInstanceField.formFieldMapping.inputType === 'TIME'">
                            <h4>{{formInstanceField.formFieldMapping.position}}
                                {{formInstanceField.formFieldMapping.question}}</h4>
                            <p-calendar name="timeInput" showTime="true" timeOnly="true"
                                [(ngModel)]="selectedFieldValues[formInstanceField.formInstanceFieldId]"></p-calendar>
                        </div>

                    </div>

                </div>
                <br />
                <p-footer>
                    <div id="buttons">
                        <button type="button" pButton icon="pi pi-check" label="Save"
                            (click)="updateFormInstance()"></button>

                        <button type="button" pButton icon="pi pi-check" label="Back" (click)="clearDialog()"></button>

                        <button type="button" pButton icon="pi pi-check" label="Delete" (click)="confirm()"></button>

                        <button type="button" pButton icon="pi pi-check" type="submit" label="Submit"></button>
                    </div>

                    <div id="buttons">
                        <button type="button" pButton icon="pi pi-check" label="Back" (click)="clearDialog()"></button>

                        <button type="button" pButton icon="pi pi-check" label="Consultations"
                            routerLink="/form-repo-screen"></button>
                    </div>
                </p-footer>

            </div>
        </form>

    </div>
</div>