<!doctype html>
<html>
    <head>
        <title>Form Repository</title>
    </head>
    <body>
        <div class="ui-fluid">
            <div class="ui-g-12 ui-lg-6">
                <div class="card" style="text-align: left;">
                    <h1>Available Published Templates</h1>
                    <p-table #dt [value]="formTemplates" selectionMode="single" [(selection)]="selectedTemplate"
                        dataKey="formTemplateId" (onRowSelect)="onRowSelect($event)" (onRowUnselect)="onRowUnselect($event)">
                        <ng-template pTemplate="header">
                            <tr>
                                <th>FormTemplate Id</th>
                                <th>Form Template Name</th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-formTemplate>
                            <tr [pSelectableRow]="formTemplate">
                                <td>{{formTemplate.formTemplateId}}</td>
                                <td>{{formTemplate.formTemplateName}}</td>

                            </tr>
                        </ng-template>
                    </p-table>
                    <p-toast key="tst" position="center"></p-toast>
                </div>
                <button pButton icon="ui-icon-add" label="Back" routerLink="/general-eforms-screen"></button>
            </div>
            
            <div class="ui-g-12 ui-lg-6" *ngIf="selected">
                <div class="card" style="text-align: left;">
                    <button type="button"  pButton label="Create Instance" (click)="createFormInstance()" ></button>
                    <h1>{{selectedTemplate.formTemplateName}} -- PREVIEW MODE</h1>

                    <div *ngFor="let formField of selectedTemplate.formFields">
                        <div *ngIf="formField.inputType === 'HEADER'">
                            <h4 class="headerInput" >{{formField.question}}</h4>
                        </div>
                        <div class="card" *ngIf="formField.inputType != 'HEADER'">
                            <div *ngIf="formField.inputType === 'CHECK_BOX'">
                                <h4>{{formField.question}} [{{formField.inputType}}] </h4>
                                <div class="ui-g">
                                    <div class="ui-g-12 ui-md-4" *ngFor="let formFieldOption of formField.formFieldOptions">
                                        <p-checkbox name="cg" value="{{formFieldOption.formFieldOptionValue}}"
                                            label="{{formFieldOption.formFieldOptionValue}}" [disabled]=true></p-checkbox>
                                    </div>
                                </div>
                            </div>
                            <div *ngIf="formField.inputType === 'TEXT'">
                                <h4>{{formField.question}} [{{formField.inputType}}] </h4>
                                <textarea [rows]="3" [cols]="30" pInputTextarea autoResize="autoResize" [disabled]="true"></textarea>
                            </div>
                            <div *ngIf="formField.inputType === 'RADIO_BUTTON'">
                                <h4>{{formField.question}} [{{formField.inputType}}] </h4>
                                <div class="ui-g">
                                    <div class="ui-g-12 ui-md-4" *ngFor="let formFieldOption of formField.formFieldOptions">
                                        <p-radioButton name="rg" value="{{formFieldOption.formFieldOptionValue}}"
                                            label="{{formFieldOption.formFieldOptionValue}}" [disabled]="true"></p-radioButton>
                                    </div>
                                </div>
                            </div>
                            <div *ngIf="formField.inputType === 'SINGLE_DROPDOWN'">
                                <h4>{{formField.question}} [{{formField.inputType}}] </h4>
                                <p-dropdown [options]="formField.formFieldOptions" optionLabel="formFieldOptionValue" ></p-dropdown>
                            </div>
                            <div *ngIf="formField.inputType === 'MULTI_DROPDOWN'">
                                <h4> {{formField.question}} [{{formField.inputType}}] </h4>
                                <p-multiSelect [options]="formField.formFieldOptions" optionLabel="formFieldOptionValue" ></p-multiSelect>
                            </div>
                            <div *ngIf="formField.inputType === 'DATE'">
                                <h4>{{formField.question}}</h4>
                                <p-calendar [showIcon]="true" placeholder="Date" [disabled]="true"></p-calendar>
                            </div>
                            <div *ngIf="formField.inputType === 'TIME'">
                                <h4>{{formField.question}} [{{formField.inputType}}] </h4>
                                <p-calendar showTime="true" [timeOnly]="true" placeholder="Time" [disabled]="true"></p-calendar>
                            </div>
                            <div *ngIf="formField.inputType === 'NUMBER'">
                                <div><h4>{{formField.question}}  [{{formField.inputType}}] <p-message *ngIf="!formField.isServicemanEditable" severity="warn" text="Doctor editable only" style="display: inline-block; font-size: 14px;"></p-message> </h4></div>
                                <p-spinner [disabled]="true"></p-spinner>
                            </div>
                            <div *ngIf="formField.inputType === 'FILE_UPLOAD' || formField.inputType === 'IMAGE_UPLOAD'">
                                <h4>{{formField.question}} [{{formField.inputType}}] </h4>
                                <p-fileUpload name="myfile[]" url="./upload.php" multiple="multiple" [disabled]="true"></p-fileUpload>
                            </div>
                            <div class="ui-g">

                                <div *ngIf="formField.isRequired">
                                    <p-message severity="error" text="Required" style="display: inline-block;"></p-message>
                                </div>
                            </div>
                        </div>
                    <br/>
                </div>
                    <button type="button" pButton label="Create Instance" (click)="createFormInstance()"></button>
                </div>
            </div>
        </div>
    </body>
</html>